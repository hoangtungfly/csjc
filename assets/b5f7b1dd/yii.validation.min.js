yii.validation=function(e){function a(a,t,i){if("undefined"==typeof File)return[];var s=e(a.input).get(0).files;return s?0===s.length?(i.skipOnEmpty||t.push(i.uploadRequired),[]):i.maxFiles&&i.maxFiles<s.length?(t.push(i.tooMany),[]):s:(t.push(i.message),[])}function t(e,a,t){if(t.extensions&&t.extensions.length>0){var i,s;i=e.name.lastIndexOf("."),s=~i?e.name.substr(i+1,e.name.length).toLowerCase():"",~t.extensions.indexOf(s)||a.push(t.wrongExtension.replace(/\{file\}/g,e.name))}t.mimeTypes&&t.mimeTypes.length>0&&(~t.mimeTypes.indexOf(e.type)||a.push(t.wrongMimeType.replace(/\{file\}/g,e.name))),t.maxSize&&t.maxSize<e.size&&a.push(t.tooBig.replace(/\{file\}/g,e.name)),t.minSize&&t.minSize>e.size&&a.push(t.tooSmall.replace(/\{file\}/g,e.name))}var i={isEmpty:function(e){return null===e||void 0===e||e==[]||""===e},addMessage:function(e,a,t){e.push(a.replace(/\{value\}/g,t))},required:function(a,t,s){var n=!1;if(void 0===s.requiredValue){var r="string"==typeof a||a instanceof String;(s.strict&&void 0!==a||!s.strict&&!i.isEmpty(r?e.trim(a):a))&&(n=!0)}else(!s.strict&&a==s.requiredValue||s.strict&&a===s.requiredValue)&&(n=!0);n||i.addMessage(t,s.message,a)},"boolean":function(e,a,t){if(!t.skipOnEmpty||!i.isEmpty(e)){var s=!t.strict&&(e==t.trueValue||e==t.falseValue)||t.strict&&(e===t.trueValue||e===t.falseValue);s||i.addMessage(a,t.message,e)}},string:function(e,a,t){if(!t.skipOnEmpty||!i.isEmpty(e)){if("string"!=typeof e)return void i.addMessage(a,t.message,e);void 0!==t.min&&e.length<t.min&&i.addMessage(a,t.tooShort,e),void 0!==t.max&&e.length>t.max&&i.addMessage(a,t.tooLong,e),void 0!==t.is&&e.length!=t.is&&i.addMessage(a,t.notEqual,e)}},file:function(i,s,n){var r=a(i,s,n);e.each(r,function(e,a){t(a,s,n)})},image:function(i,s,n,r){var o=a(i,s,n);e.each(o,function(a,i){if(t(i,s,n),"undefined"!=typeof FileReader){var o=e.Deferred(),m=new FileReader,l=new Image;l.onload=function(){n.minWidth&&this.width<n.minWidth&&s.push(n.underWidth.replace(/\{file\}/g,i.name)),n.maxWidth&&this.width>n.maxWidth&&s.push(n.overWidth.replace(/\{file\}/g,i.name)),n.minHeight&&this.height<n.minHeight&&s.push(n.underHeight.replace(/\{file\}/g,i.name)),n.maxHeight&&this.height>n.maxHeight&&s.push(n.overHeight.replace(/\{file\}/g,i.name)),o.resolve()},l.onerror=function(){s.push(n.notImage.replace(/\{file\}/g,i.name)),o.resolve()},m.onload=function(){l.src=m.result},m.onerror=function(){o.resolve()},m.readAsDataURL(i),r.push(o)}})},number:function(e,a,t){if(!t.skipOnEmpty||!i.isEmpty(e)){if("string"==typeof e&&!e.match(t.pattern))return void i.addMessage(a,t.message,e);void 0!==t.min&&e<t.min&&i.addMessage(a,t.tooSmall,e),void 0!==t.max&&e>t.max&&i.addMessage(a,t.tooBig,e)}},range:function(a,t,s){if(!s.skipOnEmpty||!i.isEmpty(a)){if(!s.allowArray&&e.isArray(a))return void i.addMessage(t,s.message,a);var n=!0;e.each(e.isArray(a)?a:[a],function(a,t){return-1==e.inArray(t,s.range)?(n=!1,!1):!0}),s.not===n&&i.addMessage(t,s.message,a)}},regularExpression:function(e,a,t){t.skipOnEmpty&&i.isEmpty(e)||(!t.not&&!e.match(t.pattern)||t.not&&e.match(t.pattern))&&i.addMessage(a,t.message,e)},email:function(e,a,t){if(!t.skipOnEmpty||!i.isEmpty(e)){var s=!0;if(t.enableIDN){var n=/^(.*<?)(.*)@(.*)(>?)$/,r=n.exec(e);null===r?s=!1:e=r[1]+punycode.toASCII(r[2])+"@"+punycode.toASCII(r[3])+r[4]}s&&(e.match(t.pattern)||t.allowName&&e.match(t.fullPattern))||i.addMessage(a,t.message,e)}},url:function(e,a,t){if(!t.skipOnEmpty||!i.isEmpty(e)){t.defaultScheme&&!e.match(/:\/\//)&&(e=t.defaultScheme+"://"+e);var s=!0;if(t.enableIDN){var n=/^([^:]+):\/\/([^\/]+)(.*)$/,r=n.exec(e);null===r?s=!1:e=r[1]+"://"+punycode.toASCII(r[2])+r[3]}s&&e.match(t.pattern)||i.addMessage(a,t.message,e)}},trim:function(a,t,s){var n=a.find(t.input),r=n.val();s.skipOnEmpty&&i.isEmpty(r)||n.val(e.trim(r))},captcha:function(a,t,s){if(!s.skipOnEmpty||!i.isEmpty(a)){var n=e("body").data(s.hashKey);n=null==n?s.hash:n[s.caseSensitive?0:1];for(var r=s.caseSensitive?a:a.toLowerCase(),o=r.length-1,m=0;o>=0;--o)m+=r.charCodeAt(o);m!=n&&i.addMessage(t,s.message,a)}},compare:function(a,t,s){if(!s.skipOnEmpty||!i.isEmpty(a)){var n,r=!0;switch(n=void 0===s.compareAttribute?s.compareValue:e("#"+s.compareAttribute).val(),"number"===s.type&&(a=parseFloat(a),n=parseFloat(n)),s.operator){case"==":r=a==n;break;case"===":r=a===n;break;case"!=":r=a!=n;break;case"!==":r=a!==n;break;case">":r=parseFloat(a)>parseFloat(n);break;case">=":r=parseFloat(a)>=parseFloat(n);break;case"<":r=parseFloat(a)<parseFloat(n);break;case"<=":r=parseFloat(a)<=parseFloat(n);break;default:r=!1}r||i.addMessage(t,s.message,a)}}};return i}(jQuery);